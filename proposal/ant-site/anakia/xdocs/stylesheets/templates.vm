#*
 * ============================================================================
 *                   The Apache Software License, Version 1.1
 * ============================================================================
 *
 *    Copyright (C) 2000-2002 The Apache Software Foundation. All
 *    rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modifica-
 * tion, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of  source code must  retain the above copyright  notice,
 *    this list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 *    this list of conditions and the following disclaimer in the documentation
 *    and/or other materials provided with the distribution.
 *
 * 3. The end-user documentation included with the redistribution, if any, must
 *    include  the following  acknowledgment:  "This product includes  software
 *    developed  by the  Apache Software Foundation  (http://www.apache.org/)."
 *    Alternately, this  acknowledgment may  appear in the software itself,  if
 *    and wherever such third-party acknowledgments normally appear.
 *
 * 4. The names "Ant" and  "Apache Software Foundation"  must not be used to
 *    endorse  or promote  products derived  from this  software without  prior
 *    written permission. For written permission, please contact
 *    apache@apache.org.
 *
 * 5. Products  derived from this software may not  be called "Apache", nor may
 *    "Apache" appear  in their name,  without prior written permission  of the
 *    Apache Software Foundation.
 *
 * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND
 * FITNESS  FOR A PARTICULAR  PURPOSE ARE  DISCLAIMED.  IN NO  EVENT SHALL  THE
 * APACHE SOFTWARE  FOUNDATION  OR ITS CONTRIBUTORS  BE LIABLE FOR  ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL,  EXEMPLARY, OR CONSEQUENTIAL  DAMAGES (INCLU-
 * DING, BUT NOT LIMITED TO, PROCUREMENT  OF SUBSTITUTE GOODS OR SERVICES; LOSS
 * OF USE, DATA, OR  PROFITS; OR BUSINESS  INTERRUPTION)  HOWEVER CAUSED AND ON
 * ANY  THEORY OF LIABILITY,  WHETHER  IN CONTRACT,  STRICT LIABILITY,  OR TORT
 * (INCLUDING  NEGLIGENCE OR  OTHERWISE) ARISING IN  ANY WAY OUT OF THE  USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * This software  consists of voluntary contributions made  by many individuals
 * on behalf of the  Apache Software Foundation.  For more  information  on the
 * Apache Software Foundation, please see <http://www.apache.org/>.
 *
 *#

## This is where the common macro's live

#macro ( table $table)
  <table>
  #foreach ( $items in $table.getChildren() )
    #if ($items.getName().equals("tr"))
      #tr ($items)
    #end
  #end
  </table>
#end

#macro ( tr $tr)
  <tr>
  #foreach ( $items in $tr.getChildren() )
    #if ($items.getName().equals("td"))
      #td ($items)
    #elseif ($items.getName().equals("th"))
      #th ($items)
    #end
  #end
</tr>
#end

#macro ( td $value)
  #if ($value.getAttributeValue("colspan"))
    #set ($colspan = $value.getAttributeValue("colspan"))
  #end
  #if ($value.getAttributeValue("rowspan"))
    #set ($rowspan = $value.getAttributeValue("rowspan"))
  #end
  <td bgcolor="$tabletdbg" colspan="$!colspan" rowspan="$!rowspan"
      valign="top" align="left">
    <font color="$darkfg" size="-1" face="arial,helvetica,sanserif">
    #if ($value.getText().length() != 0 || $value.hasChildren())
      $xmlout.outputString($value, true)
    #else
      &nbsp;
    #end
    </font>
  </td>
#end

#macro ( th $value)
  #if ($value.getAttributeValue("colspan"))
    #set ($colspan = $value.getAttributeValue("colspan"))
  #end
  #if ($value.getAttributeValue("rowspan"))
    #set ($rowspan = $value.getAttributeValue("rowspan"))
  #end
  <td bgcolor="$tablethbg" colspan="$!colspan" rowspan="$!rowspan"
      valign="top" align="left">
    <font color="$darkfg" size="-1" face="arial,helvetica,sanserif">
    #if ($value.getText().length() != 0 || $value.hasChildren())
      $xmlout.outputString($value, true)
    #else
      &nbsp;
    #end
    </font>
  </td>
#end

#macro ( projectanchor $name $value )
  #if ($value.startsWith("http://"))
    <a href="$value">$name</a>
  #elseif ($value.startsWith("/site"))
    <a href="http://jakarta.apache.org$value">$name</a>
  #else
    <a href="$relativePath$value">$name</a>
  #end
#end

#macro ( metaauthor $author $email )
  <meta name="author" value="$author">
  <meta name="email" value="$email">
#end

#macro ( image $value )
  #if ($value.getAttributeValue("width"))
    #set ($width=$value.getAttributeValue("width"))
  #end
  #if ($value.getAttributeValue("height"))
    #set ($height=$value.getAttributeValue("height"))
  #end
  #if ($value.getAttributeValue("align"))
    #set ($align=$value.getAttributeValue("align"))
  #end
  <img src="$relativePath$value.getAttributeValue("src")"
       width="$!width" height="$!height" align="$!align">
#end

#macro ( source $value)
  <div align="left">
    <table cellspacing="4" cellpadding="0" border="0">
      <tr>
        <td bgcolor="$sourceborder" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
        <td bgcolor="$sourceborder" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
        <td bgcolor="$sourceborder" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
      </tr>
      <tr>
        <td bgcolor="$sourceborder" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
        <td bgcolor="$lightbg"><pre>$escape.getText($value.getText())</pre></td>
        <td bgcolor="$sourceborder" width="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
      </tr>
      <tr>
        <td bgcolor="$sourceborder" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
        <td bgcolor="$sourceborder" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
        <td bgcolor="$sourceborder" width="1" height="1"><img src="/images/void.gif" width="1" height="1" vspace="0" hspace="0" border="0"/></td>
      </tr>
    </table>
  </div>
#end

#macro ( makeProject )
  #set ($menus = $project.getChild("body").getChildren("menu"))
  <div class="menu"><ul>
  #foreach ( $menu in $menus )
    <li><font color="$blue1">$menu.getAttributeValue("name")</font>
      <ul>
    #foreach ( $item in $menu.getChildren() )
      #set ($name = $item.getAttributeValue("name"))
      #set ($current = $root.getChild("properties").getChild("title").getText() )
        <li>
      #if ( $current.trim().equals( $name ) )
        <span class="sel"><font color="$active">$name</font></span>
      #else
        #projectanchor($name $item.getAttributeValue("href"))
      #end
        </li>
    #end
      </ul>
    </li>
  #end
  </ul>
#end

#macro (getProjectImage)
  #if ($project.getChild("logo"))
    <td align="left">
    <a href="http://jakarta.apache.org"><img src="images/jakarta-logo.gif" border="0"/></a>
    </td>
    <td align="right">
    #set ( $logoString = $project.getChild("logo").getAttributeValue("href") )
    #if ( $logoString.startsWith("/") )
      <a href="$project.getAttributeValue("href")"><img src="$relativePath$logoString" alt="$project.getChild("logo").getText()" border="0"/></a>
    #else
      <a href="$project.getAttributeValue("href")"><img src="$relativePath/$logoString" alt="$project.getChild("logo").getText()" border="0"/></a>
    #end
    </td>
  #else
    <td colspan="2">
    <a href="http://jakarta.apache.org"><img src="http://jakarta.apache.org/images/jakarta-logo.gif" align="left" border="0"/></a>
    </td>
  #end
#end

#macro (header)
  <html>
    <!-- GENERATED FILE, DO NOT EDIT, EDIT THE XML FILE IN xdocs INSTEAD! -->
    <head>
      <META http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
        <title>$project.getChild("title").getText() - $root.getChild("properties").getChild("title").getText()</title>
        <link type="text/css" href="page.css" rel="stylesheet">
  #set ($authors = $root.getChild("properties").getChildren("author"))
  #foreach ( $au in $authors )
    #metaauthor ( $au.getText() $au.getAttributeValue("email") )
  #end
    </head>

    <body marginheight="0" marginwidth="0" topmargin="0" leftmargin="0" text="$darkfg" bgcolor="$lightbg">
      <table summary="navigation path" width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td nowrap="nowrap" valign="middle" bgcolor="$blue1" height="20"><img height="1" width="5" alt="" border="0" src="images/spacer.gif"><font size="2" face="Arial, Helvetica, Sans-serif"><script src="breadcrumbs.js" language="JavaScript" type="text/javascript"></script></font></td>
        </tr>
        <tr>
          <td bgcolor="$blue2" height="2"><img height="2" width="2" alt="" border="0" src="images/spacer.gif"></td>
        </tr>
      </table>

      <table summary="header with logos" width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td bgcolor="$blue3"><a href="http://ant.apache.org/"><img border="0" alt="Apache XML logo" src="images/group-logo.gif"></a></td><td width="100%" align="center" bgcolor="$blue3"><a href="http://ant.apache.org/"><img alt="Apache XML site" border="0" src="images/project-logo.gif"></a></td><td valign="top" rowspan="2" bgcolor="$blue3">
            <form target="_blank" onsubmit="q.value = query.value + ' site:ant.apache.org'" action="http://www.google.com/search" method="get">
              <table summary="search" border="0" cellspacing="0" cellpadding="0" bgcolor="$blue2">
                <tr>
                  <td colspan="3"><img height="10" width="1" alt="" src="images/spacer.gif"></td>
                </tr>
                <tr>
                  <td><img height="1" width="1" alt="" src="images/spacer.gif"></td><td nowrap="nowrap"><input name="q" type="hidden"><input size="15" id="query" type="text"><img height="1" width="5" alt="" src="images/spacer.gif"><input name="Search" value="Search" type="submit">
                  <br>
                  <font face="Arial, Helvetica, Sans-serif" size="2" color="white">
                                    the Apache Ant site


                                    </font></td><td><img height="1" width="1" alt="" src="images/spacer.gif"></td>
                </tr>
                <tr>
                  <td><img alt="" border="0" height="10" width="9" src="images/search-left.gif"></td><td><img height="1" width="1" alt="" src="images/spacer.gif"></td><td><img alt="" border="0" height="10" width="9" src="images/search-right.gif"></td>
                </tr>
              </table>
            </form>
          </td><td bgcolor="$blue3"><img height="10" width="10" alt="" src="images/spacer.gif"></td>
        </tr>
        <tr>
          <td valign="bottom" bgcolor="$blue3" colspan="2">
            <div class="tab">
              <table summary="tab bar" border="0" cellpadding="0" cellspacing="0">
                <tr>

                  <td width="8"><img alt="" height="8" width="8" src="images/spacer.gif"></td><td valign="bottom">
                    <table summary="selected tab" height="30" border="0" cellpadding="0" cellspacing="0">
                      <tr>
                      <td valign="top" width="5" bgcolor="$blue2"><img height="5" width="5" alt="" src="images/tabSel-left.gif"></td><td valign="middle" bgcolor="$blue2"><font color="$lightfg" size="2" face="Arial, Helvetica, Sans-serif"><b>Home</b></font></td><td valign="top" width="5" bgcolor="$blue2"><img height="5" width="5" alt="" src="images/tabSel-right.gif"></td>
                      </tr>
                    </table>
                  </td>
                </tr>
              </table>
            </div>
          </td><td bgcolor="$blue3"><img alt="" width="1" height="1" src="images/spacer.gif"></td>
        </tr>
        <tr>
          <td bgcolor="$blue2" colspan="4"><img width="1" height="10" alt="" src="images/spacer.gif"></td>
        </tr>
      </table>
      <table summary="page content" bgcolor="$lightbg" width="100%" border="0" cellpadding="0" cellspacing="0">
        <tr>
          <td valign="top">
            <table summary="menu" border="0" cellspacing="0" cellpadding="0">
              <tr>
                <td rowspan="3" valign="top">
                  <table summary="blue line" border="0" cellpadding="0" cellspacing="0">
                    <tr>
                      <td bgcolor="$blue3"><img width="10" height="1" alt="" src="images/spacer.gif"></td>
                    </tr>
                    <tr>
                      <td bgcolor="$blue1"><font color="$blue2" size="4" face="Arial, Helvetica, Sans-serif">&nbsp;</font></td>
                    </tr>
                    <tr>
                      <td bgcolor="$blue3"><img width="10" height="1" alt="" src="images/spacer.gif"></td>
                    </tr>
                  </table>
                </td><td bgcolor="$blue3"><img width="1" height="1" alt="" src="images/spacer.gif"></td><td valign="bottom" bgcolor="$blue2"><img width="10" height="10" alt="" src="images/spacer.gif"></td><td nowrap="nowrap" valign="top" bgcolor="$blue2">
  #makeProject()
                </td><td valign="bottom" bgcolor="$blue2"><img width="10" height="10" alt="" src="images/spacer.gif"></td><td bgcolor="$blue3"><img width="1" height="1" alt="" src="images/spacer.gif"></td>
              </tr>
              <tr>
                <td valign="bottom" align="left" colspan="2" rowspan="2" bgcolor="$blue2"><img height="10" width="10" border="0" alt="" src="images/menu-left.gif"></td><td bgcolor="$blue2"><img height="10" width="10" border="0" alt="" src="images/spacer.gif"></td><td valign="bottom" align="right" colspan="2" rowspan="2" bgcolor="$blue2"><img height="10" width="10" border="0" alt="" src="images/menu-right.gif"></td>
              </tr>
              <tr>
                <td height="1" bgcolor="$blue3"><img width="1" height="1" alt="" src="images/spacer.gif"></td>
              </tr>
            </table>
          </td><td valign="top" width="100%">
            <table summary="content" width="100%" border="0" cellpadding="0" cellspacing="0">
              <tr>
                <td colspan="4" bgcolor="$blue3"><img width="10" height="1" alt="" src="images/spacer.gif"></td>
              </tr>
              <tr>
                <td align="left" width="10" bgcolor="$blue1"><img width="10" height="1" alt="" src="images/spacer.gif"></td><td align="left" width="50%" bgcolor="$blue1"><font color="$blue2" size="3" face="Arial, Helvetica, Sans-serif">
                &nbsp;
                </font><img width="10" height="8" alt="" src="images/spacer.gif"></td><td align="right" width="50%" bgcolor="$blue1"><font color="$blue2" size="3" face="Arial, Helvetica, Sans-serif">
                &nbsp;
                </font><img width="10" height="8" alt="" src="images/spacer.gif"></td><td width="10" bgcolor="$blue1"><img width="10" height="1" alt="" src="images/spacer.gif"></td>
              </tr>
              <tr>
                <td colspan="4" bgcolor="$blue3"><img width="10" height="1" alt="" src="images/spacer.gif"></td>
              </tr>
              <tr>
                <td align="left" width="10"><img width="10" height="1" alt="" src="images/spacer.gif"></td><td align="left" width="100%">
                  <div class="content">
#end

#macro (footer)
                  </div>
                </td><td width="10"><img width="10" height="1" alt="" src="images/spacer.gif"></td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
      <table summary="footer" cellspacing="0" cellpadding="0" width="100%" height="20" border="0">
        <tr>
          <td colspan="2" height="1" bgcolor="$blue2"><img height="1" width="1" alt="" src="images/spacer.gif"><a href="images/label.gif"></a><a href="images/page.gif"></a><a href="images/chapter.gif"></a><a href="images/chapter_open.gif"></a><a href="images/current.gif"></a><a href="/favicon.ico"></a></td>
        </tr>
        <tr>
          <td colspan="2" bgcolor="$blue1" class="copyright" align="center"><font size="2" face="Arial, Helvetica, Sans-Serif">Copyright &copy;
                    2002&nbsp;The Apache Software Foundation. All rights reserved.<script type="text/javascript" language="JavaScript"><!--
                        document.write(" - "+"Last Published: " + document.lastModified);
                      //  --></script></font></td>
        </tr>
      </table>
    </body>
  </html>
#end
