<project default="antunit" xmlns:au="antlib:org.apache.ant.antunit">
  <import file="../antunit-base.xml" />

  <property name="ant-build" location="../../../../build"/>
  <property name="build-dir" location="${ant-build}/ant-unit/javac-dir/build"/>
  
  <target name="test-updated-property">
    <delete quiet="yes" dir="${build-dir}"/>
    <mkdir dir="${build-dir}"/>
    <javac srcdir="javac-dir/good-src" destdir="${build-dir}"
           updatedProperty="classes-updated"/>
    <au:assertTrue>
      <equals arg1="${classes-updated}" arg2="true"/>
    </au:assertTrue>
    <javac srcdir="javac-dir/good-src" destdir="${build-dir}"
           updatedProperty="classes-updated-2"/>
    <au:assertFalse>
      <isset property="classes-updated-2"/>
    </au:assertFalse>
  </target>

  <target name="test-error-property">
    <delete quiet="yes" dir="${build-dir}"/>
    <mkdir dir="${build-dir}"/>
    <javac srcdir="javac-dir/good-src" destdir="${build-dir}"
           failOnError="false"
           errorProperty="compile-failed"/>
    <au:assertTrue>
      <equals arg1="${compile-failed}" arg2="${compile-failed}"/>
    </au:assertTrue>
    <javac srcdir="javac-dir/bad-src" destdir="${build-dir}"
           failOnError="false"
           errorProperty="compile-failed"/>
    <au:assertTrue>
      <equals arg1="${compile-failed}" arg2="true"/>
    </au:assertTrue>
  </target>
</project>
