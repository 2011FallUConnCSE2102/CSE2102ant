<!--
 * Copyright 2005 The Apache Software Foundation
 *
 *  Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 *
-->

<project>
  <property name="fooA" value="FooA"/>
  <property name="barB" value="BarB"/>

  <propertyset id="properties-starting-with-foo">
    <propertyref prefix="foo"/>
  </propertyset>
  <propertyset id="properties-starting-with-bar">
    <propertyref prefix="bar"/>
  </propertyset>
  <propertyset id="my-set">
    <propertyset refid="properties-starting-with-foo"/>
    <propertyset refid="properties-starting-with-bar"/>
  </propertyset>
  
  <macrodef name="expect.equals">
    <attribute name="test"/>
    <attribute name="exp"/>
    <attribute name="got"/>
    <sequential>
      <fail message=
          "@{test} failed: expected &quot;@{exp}&quot; got &quot;@{got}&quot;">
        <condition>
          <not>
            <equals arg1="@{exp}" arg2="@{got}"/>
          </not>
        </condition>
      </fail>
    </sequential>
  </macrodef>

  <target name="reference-to-two-references">
    <expect.equals
      test="reference to two references"
      exp="barB=BarB, fooA=FooA"
      got="${toString:my-set}"/>
  </target>
</project>
