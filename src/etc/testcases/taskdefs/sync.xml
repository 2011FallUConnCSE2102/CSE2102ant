<?xml version="1.0"?>
<project name="sync-test" default="not-me">
  <property name="scratch" location="synctest"/>

  <target name="not-me">
    <fail>This file must be used from a test case</fail>
  </target>

  <target name="cleanup">
    <delete dir="${scratch}"/>
  </target>

  <target name="setup">
    <property name="src" location="${scratch}/source"/>
    <property name="dest" location="${scratch}/target"/>
    <mkdir dir="${src}"/>
    <mkdir dir="${dest}"/>
  </target>

  <target name="simplecopy" depends="setup">
    <mkdir dir="${src}/a/b/c"/>
    <touch file="${src}/a/b/c/d"/>
    <sync todir="${dest}">
      <fileset dir="${src}"/>
    </sync>
  </target>

  <target name="copyandremove" depends="setup">
    <mkdir dir="${src}/a/b/c"/>
    <touch file="${src}/a/b/c/d"/>
    <mkdir dir="${dest}/e"/>
    <touch file="${dest}/e/f"/>
    <sync todir="${dest}">
      <fileset dir="${src}"/>
    </sync>
  </target>

  <target name="emptycopy" depends="setup">
    <mkdir dir="${src}/a/b/c"/>
    <touch file="${src}/a/b/c/d"/>
    <sync todir="${dest}">
      <fileset dir="${src}" excludes="**/d"/>
    </sync>
  </target>

  <target name="emptydircopy" depends="setup">
    <mkdir dir="${src}/a/b/c"/>
    <touch file="${src}/a/b/c/d"/>
    <sync todir="${dest}"
         includeemptydirs="true">
      <fileset dir="${src}" excludes="**/d"/>
    </sync>
  </target>

  <target name="emptydircopyandremove" depends="setup">
    <mkdir dir="${src}/a/b/c"/>
    <touch file="${src}/a/b/c/d"/>
    <mkdir dir="${dest}/e/f"/>
    <sync todir="${dest}"
         includeemptydirs="true">
      <fileset dir="${src}" excludes="**/d"/>
    </sync>
  </target>

  <target name="copynoremove" depends="setup">
    <mkdir dir="${src}/a/b/c"/>
    <touch file="${src}/a/b/c/d"/>
    <mkdir dir="${dest}/e"/>
    <touch file="${dest}/e/f"/>
    <sync todir="${dest}">
      <fileset dir="${src}"/>
      <deletefromtarget>
        <exclude name="e/f"/>
      </deletefromtarget>
    </sync>
  </target>

</project>